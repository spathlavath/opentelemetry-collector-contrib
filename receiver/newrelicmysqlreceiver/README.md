# New Relic MySQL Receiver

<!-- status autogenerated section -->
| Status        |           |
| ------------- |-----------|
| Stability     | [development]: metrics   |
| Distributions | [contrib] |
| Issues        | [![Open issues](https://img.shields.io/github/issues-search/open-telemetry/opentelemetry-collector-contrib?query=is%3Aissue%20is%3Aopen%20label%3Areceiver%2Fnewrelicmysql%20&label=open&color=orange&logo=opentelemetry)](https://github.com/open-telemetry/opentelemetry-collector-contrib/issues?q=is%3Aopen+is%3Aissue+label%3Areceiver%2Fnewrelicmysql) [![Closed issues](https://img.shields.io/github/issues-search/open-telemetry/opentelemetry-collector-contrib?query=is%3Aissue%20is%3Aclosed%20label%3Areceiver%2Fnewrelicmysql%20&label=closed&color=blue&logo=opentelemetry)](https://github.com/open-telemetry/opentelemetry-collector-contrib/issues?q=is%3Aclosed+is%3Aissue+label%3Areceiver%2Fnewrelicmysql) |
| Code coverage | [![codecov](https://codecov.io/github/open-telemetry/opentelemetry-collector-contrib/graph/main/badge.svg?component=receiver_newrelicmysql)](https://app.codecov.io/gh/open-telemetry/opentelemetry-collector-contrib/tree/main/?components%5B0%5D=receiver_newrelicmysql&displayType=list) |
| [Code Owners](https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/main/CONTRIBUTING.md#becoming-a-code-owner)    |  |

[development]: https://github.com/open-telemetry/opentelemetry-collector/blob/main/docs/component-stability.md#development
[contrib]: https://github.com/open-telemetry/opentelemetry-collector-releases/tree/main/distributions/otelcol-contrib
<!-- end autogenerated section -->

This receiver queries MySQL for New Relic-specific metrics.

## Prerequisites

This receiver supports MySQL version 8.0 and MariaDB 10.11.

Collecting metrics requires the ability to execute `SHOW GLOBAL STATUS`.

## Configuration

The following settings are optional:
- `endpoint`: (default = `localhost:3306`)
- `tls`: Defines the TLS configuration to use. If `tls` is not set, the default is to disable TLS connections.
  - `insecure`: (default = `false`) Set this to `true` to disable TLS connections.
  - `insecure_skip_verify`: (default = `false`) Set this to `true` to enable TLS but not verify the certificate.
  - `server_name_override`: This sets the ServerName in the TLSConfig.  
- `username`: (default = `root`)
- `password`: The password to the username.
- `allow_native_passwords`: (default = `true`)
- `database`: The database name. If not specified, metrics will be collected for all databases.
- `collection_interval` (default = `10s`): This receiver collects metrics on an interval. Valid time units are `ns`, `us` (or `Âµs`), `ms`, `s`, `m`, `h`.
- `initial_delay` (default = `1s`): defines how long this receiver waits before starting.
- `transport`: (default = `tcp`): Defines the network to use for connecting to the server.
- `extra_status_metrics`: (default = `false`): When enabled, collects additional MySQL status metrics including binlog cache, handler operations, query cache, select join types, sort operations, table locks, and thread metrics. These metrics are based on Datadog's extra_status_metrics option and provide deeper performance insights.

### Example Configuration

```yaml
receivers:
  newrelicmysql:
    endpoint: localhost:3306
    username: otel
    password: ${env:MYSQL_PASSWORD}
    database: mydb
    collection_interval: 10s
    initial_delay: 1s
    extra_status_metrics: true
```

## Metrics

Details about the metrics produced by this receiver can be found in [metadata.yaml](./metadata.yaml)

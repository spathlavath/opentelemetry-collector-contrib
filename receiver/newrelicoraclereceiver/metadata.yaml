type: newrelicoracledb

status:
  class: receiver
  stability:
    alpha: [metrics]
  distributions: [contrib]
  codeowners:
    active: [newrelic-team]

resource_attributes:
  newrelicoracledb.instance.name:
    description: The name of the Oracle instance that data is coming from.
    enabled: true
    type: string
  host.name:
    description: The host name of Oracle Server
    enabled: true
    type: string

attributes:
  newrelic.entity_name:
    description: New Relic entity name for the metric
    type: string
  query_text:
    description: SQL query text
    type: string
  query_id:
    description: Unique identifier for the query
    type: string
  database:
    description: Database name
    type: string
  wait_event_name:
    description: Name of the wait event
    type: string
  wait_category:
    description: Category of the wait event
    type: string

metrics:
  newrelicoracledb.sessions.count:
    description: Total number of active Oracle database sessions
    enabled: true
    gauge:
      value_type: int
    unit: "{sessions}"
    attributes:
      - newrelic.entity_name
  
  newrelicoracledb.query.wait_time:
    description: Oracle query wait time metrics
    enabled: true
    gauge:
      value_type: double
    unit: "ms"
    attributes:
      - query_text
      - query_id
      - database
      - wait_event_name
      - wait_category

tests:
  config:
  goleak:
    ignore:
      any:
      - "github.com/cihub/seelog.(*asyncLoopLogger).processQueue" # see https://github.com/cihub/seelog/issues/182

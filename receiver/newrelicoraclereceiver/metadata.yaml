type: newrelicoracledb

status:
  class: receiver
  stability:
    alpha: [metrics]
  distributions: [contrib]
  codeowners:
    active: [newrelic-team]

resource_attributes:
  newrelicoracledb.instance.name:
    description: The name of the Oracle instance that data is coming from.
    enabled: true
    type: string
  host.name:
    description: The host name of Oracle Server
    enabled: true
    type: string

attributes:
  newrelic.entity_name:
    description: New Relic entity name for the metric
    type: string
  database.name:
    description: Name of the database
    type: string
  query.id:
    description: Unique identifier for the query
    type: string
  query.text:
    description: Text of the SQL query
    type: string
  wait.category:
    description: Category of the wait event
    type: string
  wait.event.name:
    description: Name of the wait event
    type: string

metrics:
  newrelicoracledb.sessions.count:
    description: Total number of active Oracle database sessions
    enabled: true
    gauge:
      value_type: int
    unit: "{sessions}"
    attributes:
      - newrelic.entity_name
  newrelicoracledb.total_wait_time:
    description: "The total time waited for a specific event."
    enabled: true
    gauge:
      value_type: int
    unit: "ms"
    attributes:
      - newrelic.entity_name
      - database.name
      - query.id
      - query.text
      - wait.category
      - wait.event.name

tests:
  config:
  goleak:
    ignore:
      any:
      - "github.com/cihub/seelog.(*asyncLoopLogger).processQueue" # see https://github.com/cihub/seelog/issues/182
